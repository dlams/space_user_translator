let SUPER_PLAN_ICON = "ğŸ› ï¸"

const replacements = {
  "Repositories": "ë ˆí¬ì§€í† ë¦¬",
  "Issue": "ì´ìŠˆ",
  "Boards": "ë³´ë“œ",
  "Documents": "ë¬¸ì„œ",
  "People": "ì‚¬ìš©ì",
  "Settings": "ì„¤ì •",
  "More features": "ì„¤ì • ë”ë³´ê¸°",
  // "Customize": "ë§ì¶¤í˜•",
  "For me & unresolved": "ë‚˜ì—ê²Œ í• ë‹¹ë˜ê±°ë‚˜ í•´ê²°ë˜ì§€ ì•ŠìŒ",
  "Unresolved": "í•´ê²°ë˜ì§€ ì•ŠìŒ",
  "Resolved": "í•´ê²°ë¨",
  "For me": "ë‚˜ì—ê²Œ ì˜´",  
  "Favorite": "ì¦ê²¨ì°¾ê¸°í•œ",
  "Edit": "ìˆ˜ì •í•˜ê¸°",


  // ì„¤ì •
  // "Info": "ì •ë³´",
  // "Access": "ì ‘ê·¼",
  // "Applications": "ì–´í”Œë¦¬ì¼€ì´ì…˜",
  // "Webhook": "ì›¹í›…",
  // "Secrets": "ë¹„ë°€",
  // "Secrets &": "ë¹„ë°€ê³¼",
  // "Parameters": "ë§¤ê°œë³€ìˆ˜",
  // "Vault": "",
  // "Connections": "",
  // "Docker Registry Connections": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",



  "": "",
  "Administration": "ê´€ë¦¬ì",

  "Organization": "ì¡°ì§",
  "Basics": "ê¸°ë³¸",
  "Member Profiles": "ì‚¬ìš©ì í”„ë¡œí•„",
  "External Users": "ì™¸ë¶€ ì‚¬ìš©ì",
  "Teams": "íŒ€",
  "Locations": "ìœ„ì¹˜",
  "Equipment": "ì¥ë¹„",
  "Positions": "ì§ìœ„",
  "Billing & Plans": "ì²­êµ¬ ë° ìš”ê¸ˆì œ",
  "Automation": "ìë™í™”",
  "Dev Environments": "ê°œë°œ í™˜ê²½",
  "User Agreement": "ì‚¬ìš©ì ì•½ê´€",
  "Support": "ì„œí¬íŠ¸",

  "Default IDE Versions": "ê¸°ë³¸ IDE ë²„ì „",

  "Access": "ì ‘ê·¼",
  "Roles": "ì—­í• ",
  "Restricted Projects": "ì œí•œëœ í”„ë¡œì íŠ¸",
  "Auth Modules": "ì¸ì¦ ëª¨ë“ˆ",
  "Invitations": "ì´ˆëŒ€",
  "Throttled Logins": "ë¡œê·¸ì¸ ì œí•œ",

  "Integrations": "í†µí•©",
  "Webhooks": "ì›¹í›…",
  "External Link Patterns": "ì™¸ë¶€ ë§í¬ íŒ¨í„´",
  "SSL Keystores": "SSL í‚¤ ì €ì¥ì†Œ",
  "Trusted Certificates": "ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ì„œ",
  "Package Repositories": "íŒ¨í‚¤ì§€ ì €ì¥ì†Œ",
  
  "Customization": "ì»¤ìŠ¤í„°ë§ˆì´ì§•",
  "Custom Fields": "ì‚¬ìš©ì ì •ì˜ í•„ë“œ",
  "Absence Types": "ë¶€ì¬ ìœ í˜•",
  "Custom Emoji": "ì‚¬ìš©ì ì •ì˜ ì´ëª¨ì§€",
  "Public Holidays": "ê³µíœ´ì¼",
  
  "Debug": "ë””ë²„ê·¸",
  "Membership Requests": "íšŒì›ê°€ì… ìš”ì²­",
  "Absence History": "ë¶€ì¬ ë‚´ì—­",
  "Meetings": "íšŒì˜",

  "Extensions": "í™•ì¥",
  "Status": "ìƒíƒœ",


  // ë¬¸ì„œ
  "Viewing": "ë³´ê¸°",
  "View": "ë³´ê¸°",
  "Editing": "ìˆ˜ì •",


  // "Jobs": "",
  "All": "ëª¨ë“ ",
  "Project": "í”„ë¡œì íŠ¸",
  "Code Review": "ì½”ë“œ ë¦¬ë·°",
  
  "Dashboard": "ëŒ€ì‹œë³´ë“œ",
  "My profile": "ë‚´ í”„ë¡œí•„",
  "Calendar": "ì¼ì •",
  "Today": "ì˜¤ëŠ˜",
  "Preferences": "í™˜ê²½ ì„¤ì •",
  "Log out": "ë¡œê·¸ì•„ì›ƒ",
  "Nothing scheduled": "ì•„ë¬´ëŸ° ì¼ì •ì´ ì—†ë„¤ìš” :(",
  
  "Personal": "ê°œì¸",
  "Data": "ì •ë³´", 
  "Contact Details": "ì„¸ë¶€ ì—°ë½ì²˜",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",
  "": "",

  "Basics": "ê¸°ë³¸",
  "Logo": "ë¡œê³ ",
  "Name": "ì´ë¦„",
  "Slogan": "ì‚¬í›ˆ",
  "Default organization time zone": "ì¡°ì§ ì‹œê°„ëŒ€",
  
  "Save": "ì €ì¥",

  "Site Name": "ì‚¬ì´íŠ¸ ë„ë©”ì¸",  // header
  "Invite members": "ì‚¬ìš©ì ì´ˆëŒ€",
  "New member": "ì‹ ê·œ ì‚¬ìš©ì",

  // Member Profiles, External Users
  "Status": "ìƒíƒœ",
  "Active": "í™œì„±í™”",
  "Inactive": "ë¹„í™œì„±í™”",
  "Archived": "ë³´ì¡´ë¨",
  "All": "ì „ì²´",
  
  "Invite external users": "ì™¸ë¶€ ì‚¬ìš©ì ì´ˆëŒ€",
  "New external user": "ì‹ ê·œ ì™¸ë¶€ ì‚¬ìš©ì",

  "New team": "ìƒˆë¡œìš´ íŒ€ ìƒì„±", 

  "New location": "ìƒˆë¡œìš´ ìœ„ì¹˜ ìƒì„±",

  "New position": "ìƒˆë¡œìš´ ì§ìœ„ ìƒì„±",

  "Subscription Plan": "êµ¬ë… ìš”ê¸ˆì œ",
  "Chat Messages": "ì±„íŒ… ë©”ì‹œì§€",
  "Applications": "ì–´í”Œë¦¬ì¼€ì´ì…˜",
  "Active User Accounts": "í™œì„±í™”ëœ ì‚¬ìš©ì ê³„ì •",
  "Storage": "ì €ì¥ ê³µê°„",
  "Data Transfer": "ë°ì´í„° ì „ì†¡",
  "Computation Credits": "ê³„ì‚°ëœ í¬ë˜ë”§",

  "in January": "1ì›” ë™ì•ˆ", "in February": "2ì›” ë™ì•ˆ", "in March": "3ì›” ë™ì•ˆ", "in April": "4ì›” ë™ì•ˆ", "in May": "5ì›” ë™ì•ˆ", "in June": "6ì›” ë™ì•ˆ", "in July": "7ì›” ë™ì•ˆ", "in August": "8ì›” ë™ì•ˆ", "in September": "9ì›” ë™ì•ˆ", "in October": "10ì›” ë™ì•ˆ", "in November": "11ì›” ë™ì•ˆ", "in December": "12ì›” ë™ì•ˆ",
  "Mon": "ì›”ìš”ì¼"
//   "Space Automation Cloud": "Space ìë™í™” í´ë¼ìš°ë“œ",
//   "Self-Hosted Workers": "ìì²´ í˜¸ìŠ¤íŠ¸ Workers",
//   "Add  worker": "worker ì¶”ê°€",
//   "Tag": "íƒœê·¸",
//   "OS": "ìš´ì˜ì²´ì œ",
//   "Version": "ë²„ì „",

//   "None": "ì—†ìŒ",
//   "Basic": "ê¸°ì´ˆì ",
//   "Administrative": "í–‰ì •ì ",

//   // Roles Page ì¶”ê°€
  
//   "Settings": "ì„¤ì •",
//   "New auth module": "<superplan> ìƒˆë¡œìš´ ì¸ì¦ ëª¨ë“ˆ",

//   // ...

//   "Add keystore": "í‚¤ ì €ì¥ì†Œ ì¶”ê°€",

//   "Add certificate": "ì¸ì¦ì„œ ì¶”ê°€",

//   "Detached": "ê°ì§€ë¨",

//   // "Memberships": "ë©¤ë²„ì‰½",
//   // "Member profiles": "íšŒì› í”„ë¡œí•„",
//   // "Absences": "ë¶€ì¬",
//   // "Teams": "íŒ€",
//   "New field": "í•„ë“œ ì¶”ê°€",

//   "New absence type": "ì‹ ê·œ ë¶€ì¬ ìœ í˜•",

//   "Add emoji": "ì´ëª¨ì§€ ì¶”ê°€",
//   "Add Emoji": "ì´ëª¨ì§€ ì¶”ê°€",
//   "Date added": "ì¶”ê°€ëœ ë‚ ì§œ",
//   "Added by": "ìƒì„±ì",

//   "Add calendar": "ì¼ì • ì¶”ê°€",
//   "Location": "ìœ„ì¹˜",
//   "Details": "ìƒì„¸ ì •ë³´",

//   "Kind": "ì¢…ë¥˜",
//   "Team": "íŒ€",
//   "Name": "ì´ë¦„",
//   "Position": "ì§ìœ„",
//   "Lead": "ë¦¬ë“œ(WIP)",
//   "Since": "ë¶€í„°",
//   "Till": "ê¹Œì§€",
  
//   "Member": "ì‚¬ìš©ì",
//   "Absence type": "ë¶€ì¬ ìœ í˜•",
//   // "From": "ë¶€í„°",
//   // "Till": "ëê¹Œì§€",
//   "Title": "ì œëª©",
//   "Participants": "ì°¸ê°€ìë“¤",
//   "Owner": "ë‹´ë‹¹ì",
//   "Dates": "ë‚ ì§œ",

//   "Webhook": "ì›¹í›…",
//   "Project": "í”„ë¡œì íŠ¸",
//   "Repository": "ë ˆí¬ì§€í† ë¦¬",
//   "Enabled": "í™œì„±í™” ì—¬ë¶€",
//   "": "",
//   "": "",
//   "": "",
//   "": "",
}

// console.log("")

const targetNode = document.getElementById("app");

const config = { attributes: true, childList: true, subtree: true };

const callback = (mutationList, observer) => {
  let target = mutationList[mutationList.length - 1].target
  if (hasClass(target, "custom_translator")) return
  // console.log(mutationList[mutationList.length - 1].type)
  // console.log(mutationList[mutationList.length - 1].type)
  // if (mutationList[mutationList.length - 1].type === "attributes") return
  // if (hasClass(target, "XTextDocumentContainerStyles-scrollableContainer")) {
    // console.log("???")
  // }
  if (target.textContent) {
    const lastLeafNode = Array.from(target.querySelectorAll("*"))
      .filter(node => (node.childElementCount === 0));
    for (let child of lastLeafNode) {

      if (child.textContent) {
        // console.log(child)
        child.textContent = getTranslation(child.textContent)
        addClass(child, "custom_translator")
      }
      else {
        let parent = child.parentElement
        if (!parent) continue
        if (!parent.textContent) continue
        if (parent.childElementCount > 1) continue
        if (hasClass(parent, "custom_translator")) continue

        const iconText = parent.querySelector("i")
        const otherText = [...parent.childNodes]
              .filter(node => node.nodeType === Node.TEXT_NODE)
              .map(node => node.textContent)
              .join("");
        if (!otherText) continue
        
        parent.textContent = ""
        if (iconText)
          parent.appendChild(iconText)
        
        // console.log(parent)
        // console.log(otherText)
        // console.log()
        const newtext = document.createTextNode(getTranslation(otherText));
        parent.appendChild(newtext)
        addClass(parent, "custom_translator")
      }
    }
  }
  addClass(target, "custom_translator")
};

const observer = new MutationObserver(callback);

observer.observe(targetNode, config);


function getTranslation(str) {
  replacedStr = str
  for (const [word, replacement] of Object.entries(replacements)) {
    const regex = new RegExp(`\\b${word}\\b`, 'g');
    replacedStr = replacedStr.replace(regex, replacement);
    // lowercase
    const regex_lower = new RegExp(`\\b${word.toLowerCase()}\\b`, 'g');
    replacedStr = replacedStr.replace(regex, replacement);
    // -s
    const regex_s = new RegExp(`\\b${word}s\\b`, 'g');
    replacedStr = replacedStr.replace(regex_s, replacement);
  }
  return replacedStr;
}

function addClass(element, cls) {
  element.classList.add(cls)
} 

function hasClass(element, cls) {
  return element.classList.contains(cls)
}